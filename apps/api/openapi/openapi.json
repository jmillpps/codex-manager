{
  "openapi": "3.1.0",
  "info": {
    "title": "Codex Manager API",
    "version": "1.0.0"
  },
  "paths": {
    "/api/health": {
      "get": {
        "summary": "Health check",
        "operationId": "getHealth",
        "responses": {
          "200": {
            "description": "Service health",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "status",
                    "service",
                    "timestamp",
                    "codex",
                    "auth"
                  ],
                  "properties": {
                    "status": {
                      "type": "string"
                    },
                    "service": {
                      "type": "string"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "codex": {
                      "type": "object",
                      "required": [
                        "running",
                        "pid",
                        "initialized"
                      ],
                      "properties": {
                        "running": {
                          "type": "boolean"
                        },
                        "pid": {
                          "type": [
                            "integer",
                            "null"
                          ]
                        },
                        "initialized": {
                          "type": "boolean"
                        }
                      }
                    },
                    "auth": {
                      "type": "object",
                      "required": [
                        "hasOpenAiApiKey",
                        "codexHomeAuthFile",
                        "likelyUnauthenticated"
                      ],
                      "properties": {
                        "hasOpenAiApiKey": {
                          "type": "boolean"
                        },
                        "codexHomeAuthFile": {
                          "type": "boolean"
                        },
                        "likelyUnauthenticated": {
                          "type": "boolean"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api": {
      "get": {
        "summary": "API entry metadata",
        "operationId": "getApiInfo",
        "responses": {
          "200": {
            "description": "API metadata"
          }
        }
      }
    },
    "/api/stream": {
      "get": {
        "summary": "Websocket stream endpoint",
        "operationId": "connectEventStream",
        "parameters": [
          {
            "in": "query",
            "name": "threadId",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Optional initial thread filter for websocket subscribe."
          }
        ],
        "responses": {
          "101": {
            "description": "Switching protocols"
          },
          "400": {
            "description": "Invalid websocket upgrade request"
          }
        }
      }
    },
    "/api/agents/extensions": {
      "get": {
        "summary": "List loaded agent extensions and runtime snapshot info",
        "operationId": "listAgentExtensions",
        "responses": {
          "200": {
            "description": "Extension runtime snapshot"
          },
          "401": {
            "description": "Authentication required"
          },
          "403": {
            "description": "Forbidden"
          }
        }
      }
    },
    "/api/agents/extensions/reload": {
      "post": {
        "summary": "Reload agent extensions",
        "operationId": "reloadAgentExtensions",
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Reload completed"
          },
          "400": {
            "description": "Reload failed"
          },
          "401": {
            "description": "Authentication required"
          },
          "403": {
            "description": "Forbidden"
          },
          "409": {
            "description": "Reload already in progress"
          }
        }
      }
    },
    "/api/capabilities": {
      "get": {
        "summary": "Read probed Codex capabilities",
        "operationId": "getCapabilities",
        "parameters": [
          {
            "in": "query",
            "name": "refresh",
            "required": false,
            "schema": {
              "type": "boolean"
            },
            "description": "When true, refresh capability probes before returning."
          }
        ],
        "responses": {
          "200": {
            "description": "Capabilities state"
          }
        }
      }
    },
    "/api/features/experimental": {
      "get": {
        "summary": "List experimental features",
        "operationId": "listExperimentalFeatures",
        "parameters": [
          {
            "in": "query",
            "name": "cursor",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Pagination cursor from a previous response."
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200
            },
            "description": "Maximum rows to return."
          }
        ],
        "responses": {
          "200": {
            "description": "Feature list"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/collaboration/modes": {
      "get": {
        "summary": "List collaboration modes",
        "operationId": "listCollaborationModes",
        "parameters": [
          {
            "in": "query",
            "name": "cursor",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Pagination cursor from a previous response."
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200
            },
            "description": "Maximum rows to return."
          }
        ],
        "responses": {
          "200": {
            "description": "Collaboration mode list"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/apps": {
      "get": {
        "summary": "List configured apps/connectors",
        "operationId": "listApps",
        "parameters": [
          {
            "in": "query",
            "name": "cursor",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Pagination cursor from a previous response."
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200
            },
            "description": "Maximum rows to return."
          },
          {
            "in": "query",
            "name": "threadId",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Optional thread id for capability-scoped listing."
          },
          {
            "in": "query",
            "name": "forceRefetch",
            "required": false,
            "schema": {
              "type": "boolean"
            },
            "description": "When true, force refresh from Codex."
          }
        ],
        "responses": {
          "200": {
            "description": "App list"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/skills": {
      "get": {
        "summary": "List local skills",
        "operationId": "listSkills",
        "parameters": [
          {
            "in": "query",
            "name": "forceReload",
            "required": false,
            "schema": {
              "type": "boolean"
            },
            "description": "When true, force reload from disk."
          },
          {
            "in": "query",
            "name": "cwd",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Optional workspace to scope skill discovery."
          }
        ],
        "responses": {
          "200": {
            "description": "Skill list"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/skills/config": {
      "post": {
        "summary": "Write local skill config",
        "operationId": "writeSkillConfig",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "path",
                  "enabled"
                ],
                "properties": {
                  "path": {
                    "type": "string"
                  },
                  "enabled": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Skill config written"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/skills/remote": {
      "get": {
        "summary": "Read remote skill settings",
        "operationId": "readRemoteSkills",
        "responses": {
          "200": {
            "description": "Remote skill settings"
          },
          "500": {
            "description": "Upstream service error"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      },
      "post": {
        "summary": "Write remote skill settings",
        "operationId": "writeRemoteSkills",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "hazelnutId",
                  "isPreload"
                ],
                "properties": {
                  "hazelnutId": {
                    "type": "string"
                  },
                  "isPreload": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Remote settings written"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/mcp/reload": {
      "post": {
        "summary": "Reload MCP configuration",
        "operationId": "reloadMcpConfig",
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Reload triggered"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/mcp/servers/{serverName}/oauth/login": {
      "post": {
        "summary": "Start MCP OAuth login",
        "operationId": "startMcpOauthLogin",
        "parameters": [
          {
            "in": "path",
            "name": "serverName",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "MCP server name"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "scopes": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "timeoutSecs": {
                    "type": "integer",
                    "minimum": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OAuth login started"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/account": {
      "get": {
        "summary": "Read account state",
        "operationId": "readAccount",
        "responses": {
          "200": {
            "description": "Account details"
          },
          "401": {
            "description": "Authentication required"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/account/login/start": {
      "post": {
        "summary": "Start account login",
        "operationId": "startAccountLogin",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "oneOf": [
                  {
                    "type": "object",
                    "required": [
                      "type",
                      "apiKey"
                    ],
                    "properties": {
                      "type": {
                        "type": "string",
                        "enum": [
                          "apiKey"
                        ]
                      },
                      "apiKey": {
                        "type": "string"
                      }
                    }
                  },
                  {
                    "type": "object",
                    "required": [
                      "type"
                    ],
                    "properties": {
                      "type": {
                        "type": "string",
                        "enum": [
                          "chatgpt"
                        ]
                      }
                    }
                  },
                  {
                    "type": "object",
                    "required": [
                      "type",
                      "accessToken",
                      "chatgptAccountId"
                    ],
                    "properties": {
                      "type": {
                        "type": "string",
                        "enum": [
                          "chatgptAuthTokens"
                        ]
                      },
                      "accessToken": {
                        "type": "string"
                      },
                      "chatgptAccountId": {
                        "type": "string"
                      },
                      "chatgptPlanType": {
                        "type": "string"
                      }
                    }
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login started"
          },
          "400": {
            "description": "Invalid login payload"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/account/login/cancel": {
      "post": {
        "summary": "Cancel account login",
        "operationId": "cancelAccountLogin",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "loginId"
                ],
                "properties": {
                  "loginId": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login canceled"
          },
          "404": {
            "description": "Login id not found"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/account/logout": {
      "post": {
        "summary": "Logout account",
        "operationId": "logoutAccount",
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Logged out"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/account/rate-limits": {
      "get": {
        "summary": "Read account rate limits",
        "operationId": "readAccountRateLimits",
        "responses": {
          "200": {
            "description": "Rate limits"
          },
          "401": {
            "description": "Authentication required"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/config": {
      "get": {
        "summary": "Read Codex config",
        "operationId": "readConfig",
        "parameters": [
          {
            "in": "query",
            "name": "cwd",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Workspace root for config resolution."
          },
          {
            "in": "query",
            "name": "includeLayers",
            "required": false,
            "schema": {
              "type": "boolean"
            },
            "description": "Include layered config metadata."
          }
        ],
        "responses": {
          "200": {
            "description": "Config payload"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/config/requirements": {
      "get": {
        "summary": "Read config requirements",
        "operationId": "readConfigRequirements",
        "responses": {
          "200": {
            "description": "Config requirement payload"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/config/value": {
      "post": {
        "summary": "Write single config value",
        "operationId": "writeConfigValue",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "keyPath",
                  "mergeStrategy",
                  "value"
                ],
                "properties": {
                  "keyPath": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1
                  },
                  "mergeStrategy": {
                    "type": "string",
                    "enum": [
                      "replace",
                      "upsert"
                    ]
                  },
                  "value": {},
                  "expectedVersion": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "filePath": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Config value written"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/config/batch": {
      "post": {
        "summary": "Write config batch edits",
        "operationId": "writeConfigBatch",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "edits"
                ],
                "properties": {
                  "edits": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "object",
                      "required": [
                        "keyPath",
                        "mergeStrategy",
                        "value"
                      ],
                      "properties": {
                        "keyPath": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "minItems": 1
                        },
                        "mergeStrategy": {
                          "type": "string",
                          "enum": [
                            "replace",
                            "upsert"
                          ]
                        },
                        "value": {}
                      }
                    }
                  },
                  "expectedVersion": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "filePath": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Config edits written"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/commands/exec": {
      "post": {
        "summary": "Execute one-off command",
        "operationId": "executeCommand",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "command"
                ],
                "properties": {
                  "command": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "string"
                    }
                  },
                  "cwd": {
                    "type": "string"
                  },
                  "timeoutMs": {
                    "type": "integer",
                    "minimum": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Command result"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/feedback": {
      "post": {
        "summary": "Upload feedback to Codex",
        "operationId": "uploadFeedback",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "classification",
                  "includeLogs"
                ],
                "properties": {
                  "classification": {
                    "type": "string"
                  },
                  "includeLogs": {
                    "type": "boolean"
                  },
                  "reason": {
                    "type": "string"
                  },
                  "threadId": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Feedback accepted"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/models": {
      "get": {
        "summary": "List available models",
        "operationId": "listModels",
        "parameters": [
          {
            "in": "query",
            "name": "cursor",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Pagination cursor from a previous response."
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200
            },
            "description": "Maximum rows to return."
          }
        ],
        "responses": {
          "200": {
            "description": "Model list"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/mcp/servers": {
      "get": {
        "summary": "List MCP server statuses",
        "operationId": "listMcpServers",
        "parameters": [
          {
            "in": "query",
            "name": "cursor",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Pagination cursor from a previous response."
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200
            },
            "description": "Maximum rows to return."
          }
        ],
        "responses": {
          "200": {
            "description": "MCP server statuses"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/orchestrator/jobs/{jobId}": {
      "get": {
        "summary": "Read one orchestrator queue job",
        "operationId": "getOrchestratorJob",
        "parameters": [
          {
            "in": "path",
            "name": "jobId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Queue job id"
          }
        ],
        "responses": {
          "200": {
            "description": "Queue job"
          },
          "404": {
            "description": "Job not found"
          },
          "503": {
            "description": "Queue unavailable"
          }
        }
      }
    },
    "/api/projects/{projectId}/orchestrator/jobs": {
      "get": {
        "summary": "List orchestrator queue jobs by project",
        "operationId": "listProjectOrchestratorJobs",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Project id"
          },
          {
            "in": "query",
            "name": "state",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "queued",
                "running",
                "completed",
                "failed",
                "canceled"
              ]
            },
            "description": "Optional state filter"
          }
        ],
        "responses": {
          "200": {
            "description": "Project queue jobs"
          },
          "503": {
            "description": "Queue unavailable"
          }
        }
      }
    },
    "/api/orchestrator/jobs/{jobId}/cancel": {
      "post": {
        "summary": "Cancel one orchestrator queue job",
        "operationId": "cancelOrchestratorJob",
        "parameters": [
          {
            "in": "path",
            "name": "jobId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Queue job id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Queue job canceled"
          },
          "404": {
            "description": "Job not found"
          },
          "409": {
            "description": "Job already terminal"
          },
          "503": {
            "description": "Queue unavailable"
          }
        }
      }
    },
    "/api/projects": {
      "get": {
        "summary": "List projects",
        "operationId": "listProjects",
        "responses": {
          "200": {
            "description": "Project list"
          }
        }
      },
      "post": {
        "summary": "Create a project",
        "operationId": "createProject",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 120
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Project created"
          },
          "409": {
            "description": "Duplicate project name"
          }
        }
      }
    },
    "/api/projects/{projectId}/rename": {
      "post": {
        "summary": "Rename a project",
        "operationId": "renameProject",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Project id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 120
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Project renamed"
          },
          "404": {
            "description": "Project not found"
          },
          "409": {
            "description": "Duplicate project name"
          }
        }
      }
    },
    "/api/projects/{projectId}": {
      "delete": {
        "summary": "Delete a project",
        "operationId": "deleteProject",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Project id"
          }
        ],
        "responses": {
          "200": {
            "description": "Project deleted"
          },
          "404": {
            "description": "Project not found"
          },
          "409": {
            "description": "Project must be empty before deletion"
          }
        }
      }
    },
    "/api/projects/{projectId}/agent-sessions": {
      "get": {
        "summary": "List project-owned agent sessions",
        "operationId": "listProjectAgentSessions",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Project id"
          }
        ],
        "responses": {
          "200": {
            "description": "Project agent sessions"
          },
          "404": {
            "description": "Project not found"
          }
        }
      }
    },
    "/api/projects/{projectId}/chats/move-all": {
      "post": {
        "summary": "Move all project chats",
        "operationId": "moveProjectChats",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Project id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "destination"
                ],
                "properties": {
                  "destination": {
                    "type": "string",
                    "enum": [
                      "unassigned",
                      "archive"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Chats moved"
          },
          "404": {
            "description": "Project not found"
          },
          "409": {
            "description": "Archive precondition failed"
          }
        }
      }
    },
    "/api/projects/{projectId}/chats/delete-all": {
      "post": {
        "summary": "Delete all project chats",
        "operationId": "deleteProjectChats",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Project id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Chats deleted"
          },
          "404": {
            "description": "Project not found"
          }
        }
      }
    },
    "/api/sessions": {
      "get": {
        "summary": "List sessions",
        "operationId": "listSessions",
        "parameters": [
          {
            "in": "query",
            "name": "archived",
            "required": false,
            "schema": {
              "type": "boolean"
            },
            "description": "When true, list archived sessions."
          },
          {
            "in": "query",
            "name": "cursor",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Pagination cursor from a previous response."
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200
            },
            "description": "Maximum rows to return."
          }
        ],
        "responses": {
          "200": {
            "description": "Session list"
          }
        }
      },
      "post": {
        "summary": "Create a session",
        "operationId": "createSession",
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSessionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateSessionResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/sessions/{sessionId}": {
      "get": {
        "summary": "Read a session transcript",
        "operationId": "readSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "responses": {
          "200": {
            "description": "Session detail",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadSessionResponse"
                }
              }
            }
          },
          "410": {
            "description": "Session deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeletedSessionPayload"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Permanently delete a session",
        "operationId": "deleteSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "responses": {
          "200": {
            "description": "Session deleted"
          },
          "404": {
            "description": "Session not found"
          },
          "410": {
            "description": "Session already deleted"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/transcript/upsert": {
      "post": {
        "summary": "Upsert one supplemental transcript entry",
        "operationId": "upsertSessionTranscriptEntry",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "messageId",
                  "turnId",
                  "role",
                  "type",
                  "content",
                  "status"
                ],
                "properties": {
                  "messageId": {
                    "type": "string",
                    "minLength": 1
                  },
                  "turnId": {
                    "type": "string",
                    "minLength": 1
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "user",
                      "assistant",
                      "system"
                    ]
                  },
                  "type": {
                    "type": "string",
                    "minLength": 1
                  },
                  "content": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "streaming",
                      "complete",
                      "canceled",
                      "error"
                    ]
                  },
                  "details": {
                    "type": "string"
                  },
                  "startedAt": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "completedAt": {
                    "type": "integer",
                    "minimum": 0
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Transcript entry upserted"
          },
          "404": {
            "description": "Session not found"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/fork": {
      "post": {
        "summary": "Fork a session",
        "operationId": "forkSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session forked"
          },
          "410": {
            "description": "Session deleted"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/compact": {
      "post": {
        "summary": "Start context compaction",
        "operationId": "compactSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Compaction started"
          },
          "410": {
            "description": "Session deleted"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/rollback": {
      "post": {
        "summary": "Rollback turns in a session",
        "operationId": "rollbackSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "numTurns": {
                    "type": "integer",
                    "minimum": 1,
                    "default": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session rolled back"
          },
          "400": {
            "description": "Invalid rollback payload"
          },
          "409": {
            "description": "Rollback not allowed in current state"
          },
          "410": {
            "description": "Session deleted"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/background-terminals/clean": {
      "post": {
        "summary": "Clean background terminals",
        "operationId": "cleanBackgroundTerminals",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Background terminals cleaned"
          },
          "410": {
            "description": "Session deleted"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/review": {
      "post": {
        "summary": "Start review mode",
        "operationId": "startReview",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "delivery": {
                    "type": "string",
                    "enum": [
                      "inline",
                      "detached"
                    ]
                  },
                  "targetType": {
                    "type": "string",
                    "enum": [
                      "uncommittedChanges",
                      "baseBranch",
                      "commit",
                      "custom"
                    ]
                  },
                  "branch": {
                    "type": "string"
                  },
                  "sha": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  },
                  "instructions": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Review started"
          },
          "410": {
            "description": "Session deleted"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/turns/{turnId}/steer": {
      "post": {
        "summary": "Steer an active turn",
        "operationId": "steerTurn",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          },
          {
            "in": "path",
            "name": "turnId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Turn id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "input"
                ],
                "properties": {
                  "input": {
                    "type": "string",
                    "minLength": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Turn steered"
          },
          "400": {
            "description": "Invalid steer payload"
          },
          "410": {
            "description": "Session deleted"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/rename": {
      "post": {
        "summary": "Rename a session",
        "operationId": "renameSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "title"
                ],
                "properties": {
                  "title": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 200
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session renamed"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/archive": {
      "post": {
        "summary": "Archive a session",
        "operationId": "archiveSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session archived"
          },
          "409": {
            "description": "Session not materialized"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/unarchive": {
      "post": {
        "summary": "Unarchive a session",
        "operationId": "unarchiveSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session unarchived"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/approvals": {
      "get": {
        "summary": "List pending approvals for a session",
        "operationId": "listSessionApprovals",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "responses": {
          "200": {
            "description": "Pending approvals"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/tool-input": {
      "get": {
        "summary": "List pending tool-input requests for a session",
        "operationId": "listSessionToolInput",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "responses": {
          "200": {
            "description": "Pending tool-input requests"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/tool-calls": {
      "get": {
        "summary": "List pending dynamic tool-call requests for a session",
        "operationId": "listSessionToolCalls",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "responses": {
          "200": {
            "description": "Pending dynamic tool-call requests",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListSessionToolCallsResponse"
                }
              }
            }
          },
          "403": {
            "description": "System-owned session",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemSessionError"
                }
              }
            }
          },
          "410": {
            "description": "Session deleted"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/session-controls": {
      "get": {
        "summary": "Read session/default controls tuple",
        "operationId": "getSessionControls",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "responses": {
          "200": {
            "description": "Session controls"
          },
          "404": {
            "description": "Session not found"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      },
      "post": {
        "summary": "Apply session/default controls tuple",
        "operationId": "applySessionControls",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "scope",
                  "controls"
                ],
                "properties": {
                  "scope": {
                    "type": "string",
                    "enum": [
                      "session",
                      "default"
                    ]
                  },
                  "controls": {
                    "type": "object",
                    "required": [
                      "model",
                      "approvalPolicy",
                      "networkAccess",
                      "filesystemSandbox"
                    ],
                    "properties": {
                      "model": {
                        "type": [
                          "string",
                          "null"
                        ]
                      },
                      "approvalPolicy": {
                        "type": "string",
                        "enum": [
                          "untrusted",
                          "on-failure",
                          "on-request",
                          "never"
                        ]
                      },
                      "networkAccess": {
                        "type": "string",
                        "enum": [
                          "restricted",
                          "enabled"
                        ]
                      },
                      "filesystemSandbox": {
                        "type": "string",
                        "enum": [
                          "read-only",
                          "workspace-write",
                          "danger-full-access"
                        ]
                      },
                      "settings": {
                        "type": "object",
                        "additionalProperties": true
                      }
                    }
                  },
                  "actor": {
                    "type": "string"
                  },
                  "source": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session controls applied"
          },
          "400": {
            "description": "Invalid request"
          },
          "404": {
            "description": "Session not found"
          },
          "410": {
            "description": "Session deleted"
          },
          "423": {
            "description": "Default controls locked"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/settings": {
      "get": {
        "summary": "Read session settings",
        "operationId": "getSessionSettings",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          },
          {
            "in": "query",
            "name": "scope",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "session",
                "default"
              ]
            },
            "description": "Settings scope"
          },
          {
            "in": "query",
            "name": "key",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Optional top-level settings key"
          }
        ],
        "responses": {
          "200": {
            "description": "Session settings",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionSettingsGetResponse"
                }
              }
            }
          },
          "403": {
            "description": "System session forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemSessionError"
                }
              }
            }
          },
          "404": {
            "description": "Session not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionNotFoundPayload"
                }
              }
            }
          },
          "410": {
            "description": "Session deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeletedSessionPayload"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Upsert session settings",
        "operationId": "setSessionSettings",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SetSessionSettingsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session settings updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionSettingsSetResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiValidationError"
                }
              }
            }
          },
          "403": {
            "description": "System session forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemSessionError"
                }
              }
            }
          },
          "404": {
            "description": "Session not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionNotFoundPayload"
                }
              }
            }
          },
          "410": {
            "description": "Session deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeletedSessionPayload"
                }
              }
            }
          },
          "423": {
            "description": "Default settings locked",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionSettingsLockedResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/sessions/{sessionId}/settings/{key}": {
      "delete": {
        "summary": "Delete one top-level session setting",
        "operationId": "deleteSessionSetting",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          },
          {
            "in": "path",
            "name": "key",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Top-level settings key"
          },
          {
            "in": "query",
            "name": "scope",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "session",
                "default"
              ]
            },
            "description": "Settings scope"
          },
          {
            "in": "query",
            "name": "actor",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Optional audit actor"
          },
          {
            "in": "query",
            "name": "source",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Optional audit source"
          }
        ],
        "responses": {
          "200": {
            "description": "Session setting deleted or unchanged",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionSettingsDeleteResponse"
                }
              }
            }
          },
          "403": {
            "description": "System session forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemSessionError"
                }
              }
            }
          },
          "404": {
            "description": "Session not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionNotFoundPayload"
                }
              }
            }
          },
          "410": {
            "description": "Session deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeletedSessionPayload"
                }
              }
            }
          },
          "423": {
            "description": "Default settings locked",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionSettingsLockedResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/sessions/{sessionId}/resume": {
      "post": {
        "summary": "Resume a session",
        "operationId": "resumeSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session resumed"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/approval-policy": {
      "post": {
        "summary": "Set session approval policy",
        "operationId": "setSessionApprovalPolicy",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "approvalPolicy"
                ],
                "properties": {
                  "approvalPolicy": {
                    "type": "string",
                    "enum": [
                      "untrusted",
                      "on-failure",
                      "on-request",
                      "never"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Approval policy updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionApprovalPolicyResponse"
                }
              }
            }
          },
          "403": {
            "description": "System session forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemSessionError"
                }
              }
            }
          },
          "404": {
            "description": "Session not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionNotFoundPayload"
                }
              }
            }
          },
          "410": {
            "description": "Session deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeletedSessionPayload"
                }
              }
            }
          }
        }
      }
    },
    "/api/sessions/{sessionId}/suggested-request/jobs": {
      "post": {
        "summary": "Enqueue suggested-request generation job",
        "operationId": "enqueueSuggestedSessionRequest",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SuggestedRequestBody"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Suggested request queued",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuggestedRequestQueuedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiValidationError"
                }
              }
            }
          },
          "403": {
            "description": "System session forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemSessionError"
                }
              }
            }
          },
          "404": {
            "description": "Session not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionNotFoundPayload"
                }
              }
            }
          },
          "409": {
            "description": "Queue job conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueueErrorResponse"
                }
              }
            }
          },
          "410": {
            "description": "Session deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeletedSessionPayload"
                }
              }
            }
          },
          "429": {
            "description": "Queue full",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueueErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Queue unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueueErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/sessions/{sessionId}/suggested-request": {
      "post": {
        "summary": "Generate a suggested user request for a session",
        "operationId": "suggestSessionRequest",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SuggestedRequestBody"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Suggested request generated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuggestSessionRequestSuccessResponse"
                }
              }
            }
          },
          "202": {
            "description": "Suggested request queued",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuggestedRequestQueuedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiValidationError"
                }
              }
            }
          },
          "403": {
            "description": "System session forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemSessionError"
                }
              }
            }
          },
          "404": {
            "description": "Session not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionNotFoundPayload"
                }
              }
            }
          },
          "409": {
            "description": "No available context for suggestion",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuggestSessionRequestNoContextResponse"
                }
              }
            }
          },
          "410": {
            "description": "Session deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeletedSessionPayload"
                }
              }
            }
          },
          "429": {
            "description": "Queue full",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueueErrorResponse"
                }
              }
            }
          },
          "503": {
            "description": "Queue unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueueErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/sessions/{sessionId}/suggested-request/upsert": {
      "post": {
        "summary": "Upsert suggested-request runtime state",
        "operationId": "upsertSuggestedSessionRequest",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SuggestedRequestUpsertBody"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Suggested request state updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuggestedRequestUpsertResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuggestedRequestUpsertErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "System session forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemSessionError"
                }
              }
            }
          },
          "404": {
            "description": "Session not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionNotFoundPayload"
                }
              }
            }
          },
          "410": {
            "description": "Session deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeletedSessionPayload"
                }
              }
            }
          }
        }
      }
    },
    "/api/sessions/{sessionId}/project": {
      "post": {
        "summary": "Assign or unassign a session project",
        "operationId": "setSessionProject",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "projectId"
                ],
                "properties": {
                  "projectId": {
                    "type": [
                      "string",
                      "null"
                    ],
                    "minLength": 1,
                    "maxLength": 200
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session project updated"
          },
          "404": {
            "description": "Session or project not found"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/messages": {
      "post": {
        "summary": "Start a turn in a session",
        "operationId": "sendSessionMessage",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SendSessionMessageRequest"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Turn accepted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SendSessionMessageAcceptedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiValidationError"
                }
              }
            }
          },
          "403": {
            "description": "System session forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemSessionError"
                }
              }
            }
          },
          "404": {
            "description": "Session not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionNotFoundPayload"
                }
              }
            }
          },
          "410": {
            "description": "Session deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeletedSessionPayload"
                }
              }
            }
          }
        }
      }
    },
    "/api/sessions/{sessionId}/interrupt": {
      "post": {
        "summary": "Interrupt active turn",
        "operationId": "interruptSessionTurn",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "turnId": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Turn interrupted"
          },
          "409": {
            "description": "No active turn"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      }
    },
    "/api/tool-input/{requestId}/decision": {
      "post": {
        "summary": "Submit tool-input decision",
        "operationId": "decideToolInput",
        "parameters": [
          {
            "in": "path",
            "name": "requestId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Tool-input request id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ToolInputDecisionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Decision submitted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolInputDecisionSuccessResponse"
                }
              }
            }
          },
          "404": {
            "description": "Request not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolInputDecisionNotFoundResponse"
                }
              }
            }
          },
          "500": {
            "description": "Decision failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolInputDecisionErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/tool-calls/{requestId}/response": {
      "post": {
        "summary": "Submit dynamic tool-call response",
        "operationId": "respondToolCall",
        "parameters": [
          {
            "in": "path",
            "name": "requestId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Dynamic tool-call request id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ToolCallResponseRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Response submitted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolCallResponseSuccessResponse"
                }
              }
            }
          },
          "404": {
            "description": "Request not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolCallResponseNotFoundResponse"
                }
              }
            }
          },
          "409": {
            "description": "Response in flight",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolCallResponseConflictResponse"
                }
              }
            }
          },
          "500": {
            "description": "Response failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ToolCallResponseErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/approvals/{approvalId}/decision": {
      "post": {
        "summary": "Submit approval decision",
        "operationId": "decideApproval",
        "parameters": [
          {
            "in": "path",
            "name": "approvalId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Approval id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ApprovalDecisionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Decision submitted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApprovalDecisionSuccessResponse"
                }
              }
            }
          },
          "404": {
            "description": "Approval not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApprovalDecisionNotFoundResponse"
                }
              }
            }
          },
          "409": {
            "description": "Approval reconciled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApprovalDecisionReconciledResponse"
                }
              }
            }
          },
          "500": {
            "description": "Decision failed",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApprovalDecisionErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ApprovalPolicy": {
        "type": "string",
        "enum": [
          "untrusted",
          "on-failure",
          "on-request",
          "never"
        ]
      },
      "NetworkAccess": {
        "type": "string",
        "enum": [
          "restricted",
          "enabled"
        ]
      },
      "FilesystemSandbox": {
        "type": "string",
        "enum": [
          "read-only",
          "workspace-write",
          "danger-full-access"
        ]
      },
      "SessionSettingsScope": {
        "type": "string",
        "enum": [
          "session",
          "default"
        ]
      },
      "SessionControlsTuple": {
        "type": "object",
        "required": [
          "model",
          "approvalPolicy",
          "networkAccess",
          "filesystemSandbox"
        ],
        "properties": {
          "model": {
            "type": [
              "string",
              "null"
            ]
          },
          "approvalPolicy": {
            "$ref": "#/components/schemas/ApprovalPolicy"
          },
          "networkAccess": {
            "$ref": "#/components/schemas/NetworkAccess"
          },
          "filesystemSandbox": {
            "$ref": "#/components/schemas/FilesystemSandbox"
          },
          "settings": {
            "type": "object",
            "additionalProperties": true
          }
        }
      },
      "SessionSummary": {
        "type": "object",
        "required": [
          "sessionId",
          "title",
          "materialized",
          "modelProvider",
          "approvalPolicy",
          "sessionControls",
          "createdAt",
          "updatedAt",
          "cwd",
          "source",
          "projectId"
        ],
        "properties": {
          "sessionId": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "materialized": {
            "type": "boolean"
          },
          "modelProvider": {
            "type": "string"
          },
          "approvalPolicy": {
            "$ref": "#/components/schemas/ApprovalPolicy"
          },
          "sessionControls": {
            "$ref": "#/components/schemas/SessionControlsTuple"
          },
          "createdAt": {
            "type": "number"
          },
          "updatedAt": {
            "type": "number"
          },
          "cwd": {
            "type": "string"
          },
          "source": {
            "type": "string"
          },
          "projectId": {
            "type": [
              "string",
              "null"
            ]
          }
        }
      },
      "CodexThreadItem": {
        "type": "object",
        "required": [
          "type",
          "id"
        ],
        "properties": {
          "type": {
            "type": "string"
          },
          "id": {
            "type": "string"
          }
        },
        "additionalProperties": true
      },
      "CodexTurn": {
        "type": "object",
        "required": [
          "id",
          "status",
          "items"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CodexThreadItem"
            }
          },
          "startedAt": {},
          "startTime": {},
          "completedAt": {},
          "endTime": {}
        },
        "additionalProperties": true
      },
      "CodexThread": {
        "type": "object",
        "required": [
          "id",
          "preview",
          "modelProvider",
          "createdAt",
          "updatedAt",
          "cwd",
          "source"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "preview": {
            "type": "string"
          },
          "modelProvider": {
            "type": "string"
          },
          "createdAt": {
            "type": "number"
          },
          "updatedAt": {
            "type": "number"
          },
          "cwd": {
            "type": "string"
          },
          "source": {},
          "turns": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CodexTurn"
            }
          }
        },
        "additionalProperties": true
      },
      "TranscriptEntry": {
        "type": "object",
        "required": [
          "messageId",
          "turnId",
          "role",
          "type",
          "content",
          "status"
        ],
        "properties": {
          "messageId": {
            "type": "string"
          },
          "turnId": {
            "type": "string"
          },
          "role": {
            "type": "string",
            "enum": [
              "user",
              "assistant",
              "system"
            ]
          },
          "type": {
            "type": "string"
          },
          "content": {
            "type": "string"
          },
          "details": {
            "type": [
              "string",
              "null"
            ]
          },
          "startedAt": {
            "type": "integer"
          },
          "completedAt": {
            "type": "integer"
          },
          "status": {
            "type": "string",
            "enum": [
              "streaming",
              "complete",
              "canceled",
              "error"
            ]
          }
        },
        "additionalProperties": true
      },
      "DeletedSessionPayload": {
        "type": "object",
        "required": [
          "status",
          "sessionId",
          "message",
          "deletedAt"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "deleted"
            ]
          },
          "sessionId": {
            "type": "string"
          },
          "title": {
            "type": [
              "string",
              "null"
            ]
          },
          "message": {
            "type": "string"
          },
          "deletedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "SessionNotFoundPayload": {
        "type": "object",
        "required": [
          "status",
          "sessionId"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "not_found"
            ]
          },
          "sessionId": {
            "type": "string"
          }
        }
      },
      "SystemSessionError": {
        "type": "object",
        "required": [
          "status",
          "code",
          "sessionId",
          "message"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "error"
            ]
          },
          "code": {
            "type": "string",
            "enum": [
              "system_session"
            ]
          },
          "sessionId": {
            "type": "string"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "ApiValidationError": {
        "type": "object",
        "required": [
          "status",
          "code",
          "message"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "error"
            ]
          },
          "code": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "issues": {
            "type": "array",
            "items": {}
          }
        },
        "additionalProperties": true
      },
      "CreateSessionRequest": {
        "type": "object",
        "properties": {
          "cwd": {
            "type": "string"
          },
          "model": {
            "type": "string"
          },
          "approvalPolicy": {
            "$ref": "#/components/schemas/ApprovalPolicy"
          },
          "networkAccess": {
            "$ref": "#/components/schemas/NetworkAccess"
          },
          "filesystemSandbox": {
            "$ref": "#/components/schemas/FilesystemSandbox"
          }
        }
      },
      "SendSessionMessageRequest": {
        "type": "object",
        "required": [
          "text"
        ],
        "properties": {
          "text": {
            "type": "string",
            "minLength": 1
          },
          "model": {
            "type": "string"
          },
          "effort": {
            "type": "string",
            "enum": [
              "none",
              "minimal",
              "low",
              "medium",
              "high",
              "xhigh"
            ]
          },
          "approvalPolicy": {
            "$ref": "#/components/schemas/ApprovalPolicy"
          },
          "networkAccess": {
            "$ref": "#/components/schemas/NetworkAccess"
          },
          "filesystemSandbox": {
            "$ref": "#/components/schemas/FilesystemSandbox"
          }
        }
      },
      "SuggestedRequestBody": {
        "type": "object",
        "properties": {
          "model": {
            "type": "string"
          },
          "effort": {
            "type": "string",
            "enum": [
              "none",
              "minimal",
              "low",
              "medium",
              "high",
              "xhigh"
            ]
          },
          "draft": {
            "type": "string",
            "minLength": 1,
            "maxLength": 4000
          }
        }
      },
      "SuggestedRequestUpsertBody": {
        "type": "object",
        "required": [
          "requestKey",
          "status"
        ],
        "properties": {
          "requestKey": {
            "type": "string",
            "minLength": 1
          },
          "status": {
            "type": "string",
            "enum": [
              "streaming",
              "complete",
              "error",
              "canceled"
            ]
          },
          "suggestion": {
            "type": "string",
            "minLength": 1,
            "maxLength": 8000
          },
          "error": {
            "type": "string",
            "minLength": 1,
            "maxLength": 4000
          }
        }
      },
      "ApprovalDecisionRequest": {
        "type": "object",
        "required": [
          "decision"
        ],
        "properties": {
          "decision": {
            "type": "string",
            "enum": [
              "accept",
              "decline",
              "cancel"
            ]
          },
          "scope": {
            "type": "string",
            "enum": [
              "turn",
              "session"
            ]
          }
        }
      },
      "ToolInputDecisionOptionAnswers": {
        "type": "object",
        "required": [
          "answers"
        ],
        "properties": {
          "answers": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "ToolInputDecisionRequest": {
        "type": "object",
        "required": [
          "decision"
        ],
        "properties": {
          "decision": {
            "type": "string",
            "enum": [
              "accept",
              "decline",
              "cancel"
            ]
          },
          "answers": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/components/schemas/ToolInputDecisionOptionAnswers"
            }
          },
          "response": {}
        }
      },
      "DynamicToolCallOutputContentItem": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/DynamicToolCallTextContentItem"
          },
          {
            "$ref": "#/components/schemas/DynamicToolCallImageContentItem"
          }
        ]
      },
      "DynamicToolCallTextContentItem": {
        "type": "object",
        "required": [
          "type",
          "text"
        ],
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "inputText"
            ]
          },
          "text": {
            "type": "string"
          }
        }
      },
      "DynamicToolCallImageContentItem": {
        "type": "object",
        "required": [
          "type",
          "imageUrl"
        ],
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "inputImage"
            ]
          },
          "imageUrl": {
            "type": "string"
          }
        }
      },
      "PendingToolCall": {
        "type": "object",
        "required": [
          "requestId",
          "method",
          "threadId",
          "turnId",
          "itemId",
          "callId",
          "tool",
          "arguments",
          "summary",
          "details",
          "createdAt",
          "status"
        ],
        "properties": {
          "requestId": {
            "type": "string"
          },
          "method": {
            "type": "string",
            "enum": [
              "item/tool/call"
            ]
          },
          "threadId": {
            "type": "string"
          },
          "turnId": {
            "type": [
              "string",
              "null"
            ]
          },
          "itemId": {
            "type": [
              "string",
              "null"
            ]
          },
          "callId": {
            "type": [
              "string",
              "null"
            ]
          },
          "tool": {
            "type": "string"
          },
          "arguments": {},
          "summary": {
            "type": "string"
          },
          "details": {
            "type": "object",
            "additionalProperties": true
          },
          "createdAt": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending"
            ]
          }
        }
      },
      "ListSessionToolCallsResponse": {
        "type": "object",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PendingToolCall"
            }
          }
        }
      },
      "ToolCallResponseRequest": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "text": {
            "type": "string"
          },
          "contentItems": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DynamicToolCallOutputContentItem"
            }
          },
          "response": {}
        }
      },
      "CreateSessionResponse": {
        "type": "object",
        "required": [
          "session",
          "thread"
        ],
        "properties": {
          "session": {
            "$ref": "#/components/schemas/SessionSummary"
          },
          "thread": {
            "$ref": "#/components/schemas/CodexThread"
          }
        }
      },
      "ReadSessionResponse": {
        "type": "object",
        "required": [
          "session",
          "thread",
          "transcript"
        ],
        "properties": {
          "session": {
            "$ref": "#/components/schemas/SessionSummary"
          },
          "thread": {
            "$ref": "#/components/schemas/CodexThread"
          },
          "transcript": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TranscriptEntry"
            }
          }
        }
      },
      "SessionSettingsListResponse": {
        "type": "object",
        "required": [
          "status",
          "sessionId",
          "scope",
          "settings"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "ok"
            ]
          },
          "sessionId": {
            "type": "string"
          },
          "scope": {
            "$ref": "#/components/schemas/SessionSettingsScope"
          },
          "settings": {
            "type": "object",
            "additionalProperties": true
          }
        }
      },
      "SessionSettingsKeyResponse": {
        "type": "object",
        "required": [
          "status",
          "sessionId",
          "scope",
          "key",
          "found",
          "value"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "ok"
            ]
          },
          "sessionId": {
            "type": "string"
          },
          "scope": {
            "$ref": "#/components/schemas/SessionSettingsScope"
          },
          "key": {
            "type": "string"
          },
          "found": {
            "type": "boolean"
          },
          "value": {}
        }
      },
      "SessionSettingsGetResponse": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/SessionSettingsListResponse"
          },
          {
            "$ref": "#/components/schemas/SessionSettingsKeyResponse"
          }
        ]
      },
      "SetSessionSettingsRequest": {
        "type": "object",
        "required": [
          "scope"
        ],
        "properties": {
          "scope": {
            "$ref": "#/components/schemas/SessionSettingsScope"
          },
          "key": {
            "type": "string"
          },
          "value": {},
          "settings": {
            "type": "object",
            "additionalProperties": true
          },
          "mode": {
            "type": "string",
            "enum": [
              "merge",
              "replace"
            ]
          },
          "actor": {
            "type": "string"
          },
          "source": {
            "type": "string"
          }
        }
      },
      "SessionSettingsSetResponse": {
        "type": "object",
        "required": [
          "status",
          "sessionId",
          "scope",
          "settings"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "ok",
              "unchanged"
            ]
          },
          "sessionId": {
            "type": "string"
          },
          "scope": {
            "$ref": "#/components/schemas/SessionSettingsScope"
          },
          "key": {
            "type": "string"
          },
          "settings": {
            "type": "object",
            "additionalProperties": true
          }
        }
      },
      "SessionSettingsDeleteResponse": {
        "type": "object",
        "required": [
          "status",
          "sessionId",
          "scope",
          "key",
          "removed",
          "settings"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "ok",
              "unchanged"
            ]
          },
          "sessionId": {
            "type": "string"
          },
          "scope": {
            "$ref": "#/components/schemas/SessionSettingsScope"
          },
          "key": {
            "type": "string"
          },
          "removed": {
            "type": "boolean"
          },
          "settings": {
            "type": "object",
            "additionalProperties": true
          }
        }
      },
      "SessionSettingsLockedResponse": {
        "type": "object",
        "required": [
          "status",
          "scope",
          "message",
          "sessionId",
          "settings"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "locked"
            ]
          },
          "scope": {
            "$ref": "#/components/schemas/SessionSettingsScope"
          },
          "message": {
            "type": "string"
          },
          "sessionId": {
            "type": "string"
          },
          "settings": {
            "type": "object",
            "additionalProperties": true
          }
        }
      },
      "SessionApprovalPolicyResponse": {
        "type": "object",
        "required": [
          "status",
          "sessionId",
          "approvalPolicy"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "ok"
            ]
          },
          "sessionId": {
            "type": "string"
          },
          "approvalPolicy": {
            "$ref": "#/components/schemas/ApprovalPolicy"
          }
        }
      },
      "SuggestedRequestQueuedResponse": {
        "type": "object",
        "required": [
          "status",
          "jobId",
          "requestKey",
          "sessionId",
          "projectId",
          "dedupe"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "queued"
            ]
          },
          "jobId": {
            "type": "string"
          },
          "requestKey": {
            "type": "string"
          },
          "sessionId": {
            "type": "string"
          },
          "projectId": {
            "type": "string"
          },
          "dedupe": {
            "type": "string",
            "enum": [
              "already_queued",
              "enqueued"
            ]
          }
        }
      },
      "QueueErrorResponse": {
        "type": "object",
        "required": [
          "status",
          "code",
          "sessionId",
          "message"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "error"
            ]
          },
          "code": {
            "type": "string",
            "enum": [
              "queue_full",
              "job_conflict",
              "invalid_payload"
            ]
          },
          "sessionId": {
            "type": "string"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "SuggestSessionRequestOkResponse": {
        "type": "object",
        "required": [
          "status",
          "sessionId",
          "requestKey",
          "suggestion"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "ok"
            ]
          },
          "sessionId": {
            "type": "string"
          },
          "requestKey": {
            "type": "string"
          },
          "suggestion": {
            "type": "string"
          }
        }
      },
      "SuggestSessionRequestFallbackResponse": {
        "type": "object",
        "required": [
          "status",
          "sessionId",
          "requestKey",
          "suggestion"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "fallback"
            ]
          },
          "sessionId": {
            "type": "string"
          },
          "requestKey": {
            "type": "string"
          },
          "suggestion": {
            "type": "string"
          }
        }
      },
      "SuggestSessionRequestSuccessResponse": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/SuggestSessionRequestOkResponse"
          },
          {
            "$ref": "#/components/schemas/SuggestSessionRequestFallbackResponse"
          }
        ]
      },
      "SuggestSessionRequestNoContextResponse": {
        "type": "object",
        "required": [
          "status",
          "sessionId",
          "requestKey",
          "message"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "no_context"
            ]
          },
          "sessionId": {
            "type": "string"
          },
          "requestKey": {
            "type": "string"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "SuggestedRequestRuntimeEntry": {
        "type": "object",
        "required": [
          "status",
          "updatedAt"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "streaming",
              "complete",
              "error",
              "canceled"
            ]
          },
          "suggestion": {
            "type": "string"
          },
          "error": {
            "type": "string"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "SuggestedRequestUpsertResponse": {
        "type": "object",
        "required": [
          "status",
          "sessionId",
          "requestKey",
          "entry"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "ok"
            ]
          },
          "sessionId": {
            "type": "string"
          },
          "requestKey": {
            "type": "string"
          },
          "entry": {
            "$ref": "#/components/schemas/SuggestedRequestRuntimeEntry"
          }
        }
      },
      "SuggestedRequestUpsertInvalidResponse": {
        "type": "object",
        "required": [
          "status",
          "code",
          "message"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "invalid_request"
            ]
          },
          "code": {
            "type": "string",
            "enum": [
              "missing_suggestion"
            ]
          },
          "message": {
            "type": "string"
          }
        }
      },
      "SuggestedRequestUpsertErrorResponse": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/ApiValidationError"
          },
          {
            "$ref": "#/components/schemas/SuggestedRequestUpsertInvalidResponse"
          }
        ]
      },
      "SendSessionMessageAcceptedResponse": {
        "type": "object",
        "required": [
          "status",
          "sessionId",
          "turnId"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "accepted"
            ]
          },
          "sessionId": {
            "type": "string"
          },
          "turnId": {
            "type": "string"
          }
        }
      },
      "ToolInputDecisionSuccessResponse": {
        "type": "object",
        "required": [
          "status",
          "requestId",
          "threadId"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "ok"
            ]
          },
          "requestId": {
            "type": "string"
          },
          "threadId": {
            "type": "string"
          }
        }
      },
      "ToolInputDecisionNotFoundResponse": {
        "type": "object",
        "required": [
          "status",
          "requestId"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "not_found"
            ]
          },
          "requestId": {
            "type": "string"
          }
        }
      },
      "ToolInputDecisionErrorResponse": {
        "type": "object",
        "required": [
          "status",
          "requestId"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "error"
            ]
          },
          "requestId": {
            "type": "string"
          }
        }
      },
      "ToolCallResponseSuccessResponse": {
        "type": "object",
        "required": [
          "status",
          "requestId",
          "threadId"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "ok"
            ]
          },
          "requestId": {
            "type": "string"
          },
          "threadId": {
            "type": "string"
          }
        }
      },
      "ToolCallResponseNotFoundResponse": {
        "type": "object",
        "required": [
          "status",
          "requestId"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "not_found"
            ]
          },
          "requestId": {
            "type": "string"
          }
        }
      },
      "ToolCallResponseConflictResponse": {
        "type": "object",
        "required": [
          "status",
          "code",
          "requestId"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "conflict"
            ]
          },
          "code": {
            "type": "string",
            "enum": [
              "in_flight"
            ]
          },
          "requestId": {
            "type": "string"
          }
        }
      },
      "ToolCallResponseErrorResponse": {
        "type": "object",
        "required": [
          "status",
          "requestId"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "error"
            ]
          },
          "requestId": {
            "type": "string"
          }
        }
      },
      "ApprovalDecisionSuccessResponse": {
        "type": "object",
        "required": [
          "status",
          "approvalId",
          "threadId"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "ok"
            ]
          },
          "approvalId": {
            "type": "string"
          },
          "threadId": {
            "type": "string"
          }
        }
      },
      "ApprovalDecisionNotFoundResponse": {
        "type": "object",
        "required": [
          "status",
          "approvalId"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "not_found"
            ]
          },
          "approvalId": {
            "type": "string"
          }
        }
      },
      "ApprovalDecisionReconciledResponse": {
        "type": "object",
        "required": [
          "status",
          "approvalId",
          "threadId",
          "code"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "reconciled"
            ]
          },
          "approvalId": {
            "type": "string"
          },
          "threadId": {
            "type": "string"
          },
          "code": {
            "type": "string",
            "enum": [
              "already_resolved",
              "not_eligible",
              "conflict"
            ]
          }
        }
      },
      "ApprovalDecisionErrorResponse": {
        "type": "object",
        "required": [
          "status",
          "approvalId"
        ],
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "error"
            ]
          },
          "approvalId": {
            "type": "string"
          }
        }
      }
    }
  }
}
