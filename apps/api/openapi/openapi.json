{
  "openapi": "3.1.0",
  "info": {
    "title": "Codex Manager API",
    "version": "1.0.0"
  },
  "paths": {
    "/api/health": {
      "get": {
        "summary": "Health check",
        "operationId": "getHealth",
        "responses": {
          "200": {
            "description": "Service health",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "required": [
                    "status",
                    "service",
                    "timestamp",
                    "codex",
                    "auth"
                  ],
                  "properties": {
                    "status": {
                      "type": "string"
                    },
                    "service": {
                      "type": "string"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "codex": {
                      "type": "object",
                      "required": [
                        "running",
                        "pid",
                        "initialized"
                      ],
                      "properties": {
                        "running": {
                          "type": "boolean"
                        },
                        "pid": {
                          "type": [
                            "integer",
                            "null"
                          ]
                        },
                        "initialized": {
                          "type": "boolean"
                        }
                      }
                    },
                    "auth": {
                      "type": "object",
                      "required": [
                        "hasOpenAiApiKey",
                        "codexHomeAuthFile",
                        "likelyUnauthenticated"
                      ],
                      "properties": {
                        "hasOpenAiApiKey": {
                          "type": "boolean"
                        },
                        "codexHomeAuthFile": {
                          "type": "boolean"
                        },
                        "likelyUnauthenticated": {
                          "type": "boolean"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api": {
      "get": {
        "summary": "API entry metadata",
        "operationId": "getApiInfo",
        "responses": {
          "200": {
            "description": "API metadata"
          }
        }
      }
    },
    "/api/capabilities": {
      "get": {
        "summary": "Read probed Codex capabilities",
        "operationId": "getCapabilities",
        "parameters": [
          {
            "in": "query",
            "name": "refresh",
            "required": false,
            "schema": {
              "type": "boolean"
            },
            "description": "When true, refresh capability probes before returning."
          }
        ],
        "responses": {
          "200": {
            "description": "Capabilities state"
          }
        }
      }
    },
    "/api/features/experimental": {
      "get": {
        "summary": "List experimental features",
        "operationId": "listExperimentalFeatures",
        "parameters": [
          {
            "in": "query",
            "name": "cursor",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Pagination cursor from a previous response."
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200
            },
            "description": "Maximum rows to return."
          }
        ],
        "responses": {
          "200": {
            "description": "Feature list"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/collaboration/modes": {
      "get": {
        "summary": "List collaboration modes",
        "operationId": "listCollaborationModes",
        "parameters": [
          {
            "in": "query",
            "name": "cursor",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Pagination cursor from a previous response."
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200
            },
            "description": "Maximum rows to return."
          }
        ],
        "responses": {
          "200": {
            "description": "Collaboration mode list"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/apps": {
      "get": {
        "summary": "List configured apps/connectors",
        "operationId": "listApps",
        "parameters": [
          {
            "in": "query",
            "name": "cursor",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Pagination cursor from a previous response."
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200
            },
            "description": "Maximum rows to return."
          },
          {
            "in": "query",
            "name": "threadId",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Optional thread id for capability-scoped listing."
          },
          {
            "in": "query",
            "name": "forceRefetch",
            "required": false,
            "schema": {
              "type": "boolean"
            },
            "description": "When true, force refresh from Codex."
          }
        ],
        "responses": {
          "200": {
            "description": "App list"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/skills": {
      "get": {
        "summary": "List local skills",
        "operationId": "listSkills",
        "parameters": [
          {
            "in": "query",
            "name": "forceReload",
            "required": false,
            "schema": {
              "type": "boolean"
            },
            "description": "When true, force reload from disk."
          },
          {
            "in": "query",
            "name": "cwd",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Optional workspace to scope skill discovery."
          }
        ],
        "responses": {
          "200": {
            "description": "Skill list"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/skills/config": {
      "post": {
        "summary": "Write local skill config",
        "operationId": "writeSkillConfig",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "path",
                  "enabled"
                ],
                "properties": {
                  "path": {
                    "type": "string"
                  },
                  "enabled": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Skill config written"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/skills/remote": {
      "get": {
        "summary": "Read remote skill settings",
        "operationId": "readRemoteSkills",
        "responses": {
          "200": {
            "description": "Remote skill settings"
          },
          "500": {
            "description": "Upstream service error"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      },
      "post": {
        "summary": "Write remote skill settings",
        "operationId": "writeRemoteSkills",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "hazelnutId",
                  "isPreload"
                ],
                "properties": {
                  "hazelnutId": {
                    "type": "string"
                  },
                  "isPreload": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Remote settings written"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/mcp/reload": {
      "post": {
        "summary": "Reload MCP configuration",
        "operationId": "reloadMcpConfig",
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Reload triggered"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/mcp/servers/{serverName}/oauth/login": {
      "post": {
        "summary": "Start MCP OAuth login",
        "operationId": "startMcpOauthLogin",
        "parameters": [
          {
            "in": "path",
            "name": "serverName",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "MCP server name"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "scopes": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "timeoutSecs": {
                    "type": "integer",
                    "minimum": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OAuth login started"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/account": {
      "get": {
        "summary": "Read account state",
        "operationId": "readAccount",
        "responses": {
          "200": {
            "description": "Account details"
          },
          "401": {
            "description": "Authentication required"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/account/login/start": {
      "post": {
        "summary": "Start account login",
        "operationId": "startAccountLogin",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "oneOf": [
                  {
                    "type": "object",
                    "required": [
                      "type",
                      "apiKey"
                    ],
                    "properties": {
                      "type": {
                        "type": "string",
                        "enum": [
                          "apiKey"
                        ]
                      },
                      "apiKey": {
                        "type": "string"
                      }
                    }
                  },
                  {
                    "type": "object",
                    "required": [
                      "type"
                    ],
                    "properties": {
                      "type": {
                        "type": "string",
                        "enum": [
                          "chatgpt"
                        ]
                      }
                    }
                  },
                  {
                    "type": "object",
                    "required": [
                      "type",
                      "accessToken",
                      "chatgptAccountId"
                    ],
                    "properties": {
                      "type": {
                        "type": "string",
                        "enum": [
                          "chatgptAuthTokens"
                        ]
                      },
                      "accessToken": {
                        "type": "string"
                      },
                      "chatgptAccountId": {
                        "type": "string"
                      },
                      "chatgptPlanType": {
                        "type": "string"
                      }
                    }
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login started"
          },
          "400": {
            "description": "Invalid login payload"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/account/login/cancel": {
      "post": {
        "summary": "Cancel account login",
        "operationId": "cancelAccountLogin",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "loginId"
                ],
                "properties": {
                  "loginId": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login canceled"
          },
          "404": {
            "description": "Login id not found"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/account/logout": {
      "post": {
        "summary": "Logout account",
        "operationId": "logoutAccount",
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Logged out"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/account/rate-limits": {
      "get": {
        "summary": "Read account rate limits",
        "operationId": "readAccountRateLimits",
        "responses": {
          "200": {
            "description": "Rate limits"
          },
          "401": {
            "description": "Authentication required"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/config": {
      "get": {
        "summary": "Read Codex config",
        "operationId": "readConfig",
        "parameters": [
          {
            "in": "query",
            "name": "cwd",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Workspace root for config resolution."
          },
          {
            "in": "query",
            "name": "includeLayers",
            "required": false,
            "schema": {
              "type": "boolean"
            },
            "description": "Include layered config metadata."
          }
        ],
        "responses": {
          "200": {
            "description": "Config payload"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/config/requirements": {
      "get": {
        "summary": "Read config requirements",
        "operationId": "readConfigRequirements",
        "responses": {
          "200": {
            "description": "Config requirement payload"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/config/value": {
      "post": {
        "summary": "Write single config value",
        "operationId": "writeConfigValue",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "keyPath",
                  "mergeStrategy",
                  "value"
                ],
                "properties": {
                  "keyPath": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1
                  },
                  "mergeStrategy": {
                    "type": "string",
                    "enum": [
                      "replace",
                      "upsert"
                    ]
                  },
                  "value": {},
                  "expectedVersion": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "filePath": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Config value written"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/config/batch": {
      "post": {
        "summary": "Write config batch edits",
        "operationId": "writeConfigBatch",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "edits"
                ],
                "properties": {
                  "edits": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "object",
                      "required": [
                        "keyPath",
                        "mergeStrategy",
                        "value"
                      ],
                      "properties": {
                        "keyPath": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "minItems": 1
                        },
                        "mergeStrategy": {
                          "type": "string",
                          "enum": [
                            "replace",
                            "upsert"
                          ]
                        },
                        "value": {}
                      }
                    }
                  },
                  "expectedVersion": {
                    "type": "integer",
                    "minimum": 0
                  },
                  "filePath": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Config edits written"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/commands/exec": {
      "post": {
        "summary": "Execute one-off command",
        "operationId": "executeCommand",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "command"
                ],
                "properties": {
                  "command": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "string"
                    }
                  },
                  "cwd": {
                    "type": "string"
                  },
                  "timeoutMs": {
                    "type": "integer",
                    "minimum": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Command result"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/feedback": {
      "post": {
        "summary": "Upload feedback to Codex",
        "operationId": "uploadFeedback",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "classification",
                  "includeLogs"
                ],
                "properties": {
                  "classification": {
                    "type": "string"
                  },
                  "includeLogs": {
                    "type": "boolean"
                  },
                  "reason": {
                    "type": "string"
                  },
                  "threadId": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Feedback accepted"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/models": {
      "get": {
        "summary": "List available models",
        "operationId": "listModels",
        "parameters": [
          {
            "in": "query",
            "name": "cursor",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Pagination cursor from a previous response."
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200
            },
            "description": "Maximum rows to return."
          }
        ],
        "responses": {
          "200": {
            "description": "Model list"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/mcp/servers": {
      "get": {
        "summary": "List MCP server statuses",
        "operationId": "listMcpServers",
        "parameters": [
          {
            "in": "query",
            "name": "cursor",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Pagination cursor from a previous response."
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200
            },
            "description": "Maximum rows to return."
          }
        ],
        "responses": {
          "200": {
            "description": "MCP server statuses"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/projects": {
      "get": {
        "summary": "List projects",
        "operationId": "listProjects",
        "responses": {
          "200": {
            "description": "Project list"
          }
        }
      },
      "post": {
        "summary": "Create a project",
        "operationId": "createProject",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 120
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Project created"
          },
          "409": {
            "description": "Duplicate project name"
          }
        }
      }
    },
    "/api/projects/{projectId}/rename": {
      "post": {
        "summary": "Rename a project",
        "operationId": "renameProject",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Project id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 120
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Project renamed"
          },
          "404": {
            "description": "Project not found"
          },
          "409": {
            "description": "Duplicate project name"
          }
        }
      }
    },
    "/api/projects/{projectId}": {
      "delete": {
        "summary": "Delete a project",
        "operationId": "deleteProject",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Project id"
          }
        ],
        "responses": {
          "200": {
            "description": "Project deleted"
          },
          "404": {
            "description": "Project not found"
          },
          "409": {
            "description": "Project must be empty before deletion"
          }
        }
      }
    },
    "/api/projects/{projectId}/chats/move-all": {
      "post": {
        "summary": "Move all project chats",
        "operationId": "moveProjectChats",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Project id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "destination"
                ],
                "properties": {
                  "destination": {
                    "type": "string",
                    "enum": [
                      "unassigned",
                      "archive"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Chats moved"
          },
          "404": {
            "description": "Project not found"
          },
          "409": {
            "description": "Archive precondition failed"
          }
        }
      }
    },
    "/api/projects/{projectId}/chats/delete-all": {
      "post": {
        "summary": "Delete all project chats",
        "operationId": "deleteProjectChats",
        "parameters": [
          {
            "in": "path",
            "name": "projectId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Project id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Chats deleted"
          },
          "404": {
            "description": "Project not found"
          }
        }
      }
    },
    "/api/sessions": {
      "get": {
        "summary": "List sessions",
        "operationId": "listSessions",
        "parameters": [
          {
            "in": "query",
            "name": "archived",
            "required": false,
            "schema": {
              "type": "boolean"
            },
            "description": "When true, list archived sessions."
          },
          {
            "in": "query",
            "name": "cursor",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Pagination cursor from a previous response."
          },
          {
            "in": "query",
            "name": "limit",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 200
            },
            "description": "Maximum rows to return."
          }
        ],
        "responses": {
          "200": {
            "description": "Session list"
          }
        }
      },
      "post": {
        "summary": "Create a session",
        "operationId": "createSession",
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "cwd": {
                    "type": "string"
                  },
                  "model": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session created"
          }
        }
      }
    },
    "/api/sessions/{sessionId}": {
      "get": {
        "summary": "Read a session transcript",
        "operationId": "readSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "responses": {
          "200": {
            "description": "Session detail"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      },
      "delete": {
        "summary": "Permanently delete a session",
        "operationId": "deleteSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "responses": {
          "200": {
            "description": "Session deleted"
          },
          "404": {
            "description": "Session not found"
          },
          "410": {
            "description": "Session already deleted"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/fork": {
      "post": {
        "summary": "Fork a session",
        "operationId": "forkSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session forked"
          },
          "410": {
            "description": "Session deleted"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/compact": {
      "post": {
        "summary": "Start context compaction",
        "operationId": "compactSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Compaction started"
          },
          "410": {
            "description": "Session deleted"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/rollback": {
      "post": {
        "summary": "Rollback turns in a session",
        "operationId": "rollbackSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "numTurns": {
                    "type": "integer",
                    "minimum": 1,
                    "default": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session rolled back"
          },
          "400": {
            "description": "Invalid rollback payload"
          },
          "409": {
            "description": "Rollback not allowed in current state"
          },
          "410": {
            "description": "Session deleted"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/background-terminals/clean": {
      "post": {
        "summary": "Clean background terminals",
        "operationId": "cleanBackgroundTerminals",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Background terminals cleaned"
          },
          "410": {
            "description": "Session deleted"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/review": {
      "post": {
        "summary": "Start review mode",
        "operationId": "startReview",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "delivery": {
                    "type": "string",
                    "enum": [
                      "inline",
                      "detached"
                    ]
                  },
                  "targetType": {
                    "type": "string",
                    "enum": [
                      "uncommittedChanges",
                      "baseBranch",
                      "commit",
                      "custom"
                    ]
                  },
                  "branch": {
                    "type": "string"
                  },
                  "sha": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  },
                  "instructions": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Review started"
          },
          "410": {
            "description": "Session deleted"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/turns/{turnId}/steer": {
      "post": {
        "summary": "Steer an active turn",
        "operationId": "steerTurn",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          },
          {
            "in": "path",
            "name": "turnId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Turn id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "input"
                ],
                "properties": {
                  "input": {
                    "type": "string",
                    "minLength": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Turn steered"
          },
          "400": {
            "description": "Invalid steer payload"
          },
          "410": {
            "description": "Session deleted"
          },
          "501": {
            "description": "Method unavailable"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/rename": {
      "post": {
        "summary": "Rename a session",
        "operationId": "renameSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "title"
                ],
                "properties": {
                  "title": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 200
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session renamed"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/archive": {
      "post": {
        "summary": "Archive a session",
        "operationId": "archiveSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session archived"
          },
          "409": {
            "description": "Session not materialized"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/unarchive": {
      "post": {
        "summary": "Unarchive a session",
        "operationId": "unarchiveSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session unarchived"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/approvals": {
      "get": {
        "summary": "List pending approvals for a session",
        "operationId": "listSessionApprovals",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "responses": {
          "200": {
            "description": "Pending approvals"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/tool-input": {
      "get": {
        "summary": "List pending tool-input requests for a session",
        "operationId": "listSessionToolInput",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "responses": {
          "200": {
            "description": "Pending tool-input requests"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/resume": {
      "post": {
        "summary": "Resume a session",
        "operationId": "resumeSession",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session resumed"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/suggested-reply": {
      "post": {
        "summary": "Generate a suggested user reply for a session",
        "operationId": "suggestSessionReply",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "model": {
                    "type": "string"
                  },
                  "effort": {
                    "type": "string",
                    "enum": [
                      "none",
                      "minimal",
                      "low",
                      "medium",
                      "high",
                      "xhigh"
                    ]
                  },
                  "draft": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 4000
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Suggested reply generated"
          },
          "409": {
            "description": "No available context for suggestion"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/project": {
      "post": {
        "summary": "Assign or unassign a session project",
        "operationId": "setSessionProject",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "projectId"
                ],
                "properties": {
                  "projectId": {
                    "type": [
                      "string",
                      "null"
                    ],
                    "minLength": 1,
                    "maxLength": 200
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session project updated"
          },
          "404": {
            "description": "Session or project not found"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/messages": {
      "post": {
        "summary": "Start a turn in a session",
        "operationId": "sendSessionMessage",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "text"
                ],
                "properties": {
                  "text": {
                    "type": "string"
                  },
                  "model": {
                    "type": "string"
                  },
                  "effort": {
                    "type": "string",
                    "enum": [
                      "none",
                      "minimal",
                      "low",
                      "medium",
                      "high",
                      "xhigh"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Turn accepted"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/interrupt": {
      "post": {
        "summary": "Interrupt active turn",
        "operationId": "interruptSessionTurn",
        "parameters": [
          {
            "in": "path",
            "name": "sessionId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session id"
          }
        ],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "turnId": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Turn interrupted"
          },
          "409": {
            "description": "No active turn"
          },
          "410": {
            "description": "Session deleted"
          }
        }
      }
    },
    "/api/tool-input/{requestId}/decision": {
      "post": {
        "summary": "Submit tool-input decision",
        "operationId": "decideToolInput",
        "parameters": [
          {
            "in": "path",
            "name": "requestId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Tool-input request id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "decision"
                ],
                "properties": {
                  "decision": {
                    "type": "string",
                    "enum": [
                      "accept",
                      "decline",
                      "cancel"
                    ]
                  },
                  "answers": {
                    "type": "object",
                    "additionalProperties": {
                      "type": "object",
                      "required": [
                        "answers"
                      ],
                      "properties": {
                        "answers": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  },
                  "response": {}
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Decision submitted"
          },
          "404": {
            "description": "Request not found"
          }
        }
      }
    },
    "/api/approvals/{approvalId}/decision": {
      "post": {
        "summary": "Submit approval decision",
        "operationId": "decideApproval",
        "parameters": [
          {
            "in": "path",
            "name": "approvalId",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Approval id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "decision"
                ],
                "properties": {
                  "decision": {
                    "type": "string",
                    "enum": [
                      "accept",
                      "decline",
                      "cancel"
                    ]
                  },
                  "scope": {
                    "type": "string",
                    "enum": [
                      "turn",
                      "session"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Decision submitted"
          },
          "404": {
            "description": "Approval not found"
          }
        }
      }
    }
  }
}
